<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AnimoLabs Sign-Up Sheet</title>
    <link rel="stylesheet" href="../css/main.css" />
  </head>

  <body>
    <h1>SIGN UP</h1>
    <form id="signupForm">
      <div id="errorMsg"></div>

      <div class="signup_block">
        <div class="first_name">
          <label for="first_name">FIRST NAME</label>
          <input type="text" id="first_name" name="first_name" required />
        </div>

        <div class="last_name">
          <label for="last_name">LAST NAME</label>
          <input type="text" id="last_name" name="last_name" required />
        </div>

        <div class="username">
          <label for="username">USERNAME</label>
          <input type="text" id="username" name="username" required />
        </div>

        <div class="password">
          <label for="password">PASSWORD</label>
          <input type="password" id="password" name="password" required />
        </div>

        <div class="telephone">
          <label for="tel_no">PHONE NUMBER</label>
          <input type="tel" id="phone" name="phone" required />
        </div>

        <div class="id_num">
          <label for="id_num">ID NUMBER</label>
          <input type="number" id="id_num" name="id_num" required />
        </div>

        <div class="submit">
          <button type="submit">Create Account</button>
        </div>
      </div>
    </form>

    <p>Already have an account?</p>
    <a href="login.html" class="btn">Log-In Here</a>
    <a href="landing.html" class="btn">Return to Main Page</a>

      <script src="../js/auth.js"></script>
        <script>
            document.getElementById('signupForm').addEventListener('submit', function (e) {
                e.preventDefault();

                const userData = {
                    firstName: document.getElementById('first_name').value,
                    lastName: document.getElementById('last_name').value,
                    username: document.getElementById('username').value,
                    password: document.getElementById('password').value,
                    idNumber: document.getElementById('id_num').value,
                };

                const errorMsg = document.getElementById('errorMsg');

                if (signup(userData)) {
                    alert('Account created successfully!');
                    window.location.href = 'reservation.html';
                } else {
                    errorMsg.textContent = 'Username already exists';
                    errorMsg.style.display = 'block';
                }
            });
        </script>
  </body>
</html>
